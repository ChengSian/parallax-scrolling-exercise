{"version":3,"sources":["all.js"],"names":["$q","className","document","querySelector","$qa","querySelectorAll","scroll","SmoothScroll","speed","speedAsDuration","showSkill","getPosition","element","x","y","console","offsetLeft","scrollLeft","clientLeft","offsetTop","clientTop","offsetParent","window","addEventListener","pageYOffset","windowHeight","innerHeight","forEach","ele","targetEle","target","targetPos","targetHeight","offsetHeight","getAttribute","scrollPos","linkEle","classList","remove","progress","style","concat","thisValue","length","i","thisPos","showAnimated","log","add"],"mappings":"aACA,IAAMA,GAAK,SAASC,GADpB,OAAAC,SAAAC,cAAAF,IAEEG,IAAOF,SAASC,GADlB,OAAAD,SAAAG,iBAAAJ,IAOAK,OAAA,IAAAC,aAAA,eAAA,CAEEC,MAAO,IACPC,iBAAiB,IAInBC,WAAA,EAiDG,SAEDC,YAAAC,GAGAZ,IAOA,IAAIa,EAAI,EATLC,EAAA,EAEAF,GACHG,GAAOH,EAAKI,WAAZJ,EAAAK,WAAAL,EAAAM,WAGFJ,GAAAF,EAAAO,UAAAP,EAAAK,WAAAL,EAAAQ,UASIR,EAAUA,EAAQS,aANpB,MAAK,CAALR,EAAAA,EAAAC,EAAAA,GA3DFQ,OAAOC,iBAAiB,SAAU,WADlC,IAAIb,EAAYY,OAAME,YAGhBC,EAAeH,OAAOI,YAG1BtB,IAAI,cAAcuB,QAAQ,SAASC,GAHnC,IAAIH,EAAYG,EAAGN,aAAOI,QAE1BG,EAAA7B,GAAA8B,GAIQC,EAAYF,EAAUV,UAH1Ba,EAAcL,EAAQM,aAClBH,EAAY9B,GAACkC,WAAAA,OAAaJ,EAAbI,OACDlC,EAAW,IAAvB6B,GAAuBM,EAAAJ,EAAAC,GAM3BI,EAAQC,UAAUC,OAAO,UAL3BF,EAAML,UAAYF,IAAAA,WAClBO,EAAMJ,UAAeH,OAAAA,YAIXQ,GAAAA,WAAiBlB,WACzBiB,EAAQC,EAAc,IAAtB3B,YACDN,IAHD,yBAGOuB,QAAA,SAAAC,GACLQ,IAAAA,EAAQC,EAAUC,QAAOC,SAWzBX,EAAIY,MAAJ,MAAA,GAAAC,OAAwBC,EAAxB,OAEFhC,WAAY,GAHVN,IAAA,aAAAuC,QAAAvC,IAAA,WAAAuC,QAEDvC,IALD,aAAAuB,QAAA,SAAAC,EAAAgB,GAMAlC,IAAAA,EAAAC,YAAAiB,GAAAd,EAIiB+B,GAAI,GAAnBC,EAAmBX,GACvBpB,EAAQgC,UAAQC,IAAA,YAgBhBhD,GAAG,eAAewC,MAAlB,UAAA,cAAAC,OAAqDN,EAAY,EAAjE,OATInC,GAAA,eAAIyB,MAAJ,UAAA,cAAAgB,OAA+CN,EAAA,EAA/C,OACEP,GAAAA,aAAIS,MAAUW,yBAAdpB,IAAAA,OAAAO,EAAA,EAAAP","file":"all.js","sourcesContent":["// querySelector alias\r\nconst $q = function(className) {\r\n  return document.querySelector(className)\r\n}\r\nconst $qa = function(className) {\r\n  return document.querySelectorAll(className)\r\n}\r\n\r\n// 平滑滾動\r\nvar scroll = new SmoothScroll('a[href*=\"#\"]', {\r\n  speed: 750,\r\n  speedAsDuration: true\r\n})\r\n\r\n// 監控視窗的滾動\r\n// 滾動視窗時，就做事情\r\nvar showSkill = false // 顯示過 skill 沒有\r\nwindow.addEventListener(\"scroll\", function() {\r\n  var scrollPos = window.pageYOffset // 目前視窗的位置\r\n  var windowHeight = window.innerHeight // 目前畫面的高\r\n\r\n  // 畫面進入連結對應區愧，變更連結狀態\r\n  $qa(\".scrollTop\").forEach(function(ele) {\r\n    const target = ele.getAttribute(\"href\") // 區塊錨點\r\n    const targetEle = $q(target) // 區塊 ele\r\n    const targetPos = targetEle.offsetTop // 區塊位置\r\n    const targetHeight = targetEle.offsetHeight // 區塊高度\r\n    const linkEle = $q(`a[href=\"${target}\"]`) // 目前 for 到的連結 ele\r\n\r\n    if (scrollPos >= targetPos - 50 && scrollPos < targetPos + targetHeight) {\r\n      linkEle.classList.remove(\"active\")\r\n      linkEle.classList.add(\"active\")\r\n    } else {\r\n      linkEle.classList.remove(\"active\")\r\n    }\r\n  })\r\n\r\n  // 畫面進入 progress bar，秀出進度條\r\n  const skillTop = $q(\"#skills\").offsetTop\r\n  if (scrollPos + windowHeight / 2 >= skillTop && !showSkill) {\r\n    $qa(\"#skills .progress-bar\").forEach(function(ele) {\r\n      var thisValue = ele.dataset.progress\r\n      // console.log(thisValue)\r\n      // console.log(ele)\r\n      ele.style[\"width\"] = `${thisValue}%`\r\n    })\r\n    showSkill = true\r\n  }\r\n\r\n  // 畫面進入 .animated，添加 .fadeIn\r\n  let showAnimated = $qa(\".animated\").length == $qa(\".fadeIn\").length\r\n  console.log($qa(\".animated\").length, $qa(\".fadeIn\").length)\r\n  if (!showAnimated) {\r\n    $qa(\".animated\").forEach(function(ele, i) {\r\n      const thisPos = getPosition(ele).y  // for 到的元素位置\r\n      // console.log(ele)\r\n      console.log(windowHeight, scrollPos, thisPos)\r\n\r\n      if (windowHeight * 0.7 + scrollPos >= thisPos) {\r\n        ele.classList.add(\"fadeIn\")\r\n      }\r\n\r\n      console.log(\"animated\")\r\n    })\r\n  }\r\n\r\n  // 背景圖片會用不同速率移動\r\n  $q(\".header-img\").style[\"transform\"] = `translateY(${scrollPos / 2}px)`\r\n  $q(\"#header-ele\").style[\"transform\"] = `translateY(${scrollPos / 3}px)`\r\n  $q(\"#profiles\").style[\"background-position-y\"] = `-${scrollPos / 2}px`\r\n  console.log(\"scroll\")\r\n})\r\n\r\n// 取得元素目前左上角位置\r\nfunction getPosition (element) {\r\n  // https://andyyou.github.io/2015/04/07/get-an-element-s-position-by-js/\r\n  var x = 0;\r\n  var y = 0;\r\n  \r\n  while ( element ) {\r\n    x += element.offsetLeft - element.scrollLeft + element.clientLeft;\r\n    y += element.offsetTop - element.scrollLeft + element.clientTop;\r\n    element = element.offsetParent;\r\n  }\r\n\r\n  return { x: x, y: y };\r\n}\r\n"]}